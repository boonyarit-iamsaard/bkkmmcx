<script>
    let airline = [];
    let totalFlt = [];
    let set = [];
    let j = 0;
    let c;
    let grand = [];

    let bgColor = [
        "rgba(255, 99, 132, 0.6)",
        "rgba(54, 162, 235, 0.6)",
        "rgba(255, 206, 86, 0.6)",
        "rgba(75, 192, 192, 0.6)",
        "rgba(153, 102, 255, 0.6)",
        "rgba(255, 159, 64, 0.6)",
    ];

    let bdColor = [
        "rgba(255, 99, 132, 1)",
        "rgba(54, 162, 235, 1)",
        "rgba(255, 206, 86, 1)",
        "rgba(75, 192, 192, 1)",
        "rgba(153, 102, 255, 1)",
        "rgba(255, 159, 64, 1)",
    ];

    {% for k in range(1, 13) %}
        grand.push('{{data[0][3][k]}}')
    {% endfor %}

    let b = {
        label: '{{ data[0][3][0] }}',
        data: grand,
        type: 'line',
        backgroundColor: "rgba(153, 102, 255, 0.1)",
        borderWidth: 1,
    }

    {% for airline in data.0 %}
        totalFlt.push([])
        {% for i in range(1, 13) %}
            totalFlt[j].push({{ airline[i] }})
        {% endfor %}
        j++
        airline.push('{{ airline.0 }}')
    {% endfor %}

    for (let i = 0; i < airline.length; i++) {
        c = {
            label: airline[i],
            data: totalFlt[i],
            backgroundColor: bgColor[i],
            borderColor: bdColor[i],
            borderWidth: 1,
        };
        set.push(c);
    }
    set.push(b)

    let ctx = document
        .getElementById("graphCanvas")
        .getContext("2d");
    let myChart = new Chart(ctx, {
        type: "bar",
        data: {
            labels: [
                "JAN",
                "FEB",
                "MAR",
                "APR",
                "MAY",
                "JUN",
                "JUL",
                "AUG",
                "SEP",
                "OCT",
                "NOV",
                "DEC",
            ],
            datasets: set,
        },
        options: {
            title: {
                display: true,
                text: 'Monthly Flights',
                fontFamily: "'IBM Plex Sans', sans-serif",
                fontSize: 16,
                fontStyle: 'normal'
            },
        }
    });
</script>